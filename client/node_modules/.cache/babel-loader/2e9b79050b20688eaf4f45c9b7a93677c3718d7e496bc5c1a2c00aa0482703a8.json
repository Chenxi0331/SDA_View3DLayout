{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chenx\\\\Documents\\\\sda\\\\prototype\\\\client\\\\src\\\\ThreeDViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ThreeDViewer = ({\n  layoutData\n}) => {\n  _s();\n  const mountRef = useRef(null);\n  const sceneRef = useRef(null);\n  const rendererRef = useRef(null);\n  const controlsRef = useRef(null);\n  useEffect(() => {\n    // --- Init Scene ---\n    const width = mountRef.current.clientWidth;\n    const height = mountRef.current.clientHeight;\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xf0f0f0); // Soft grey background\n    // scene.fog = new THREE.Fog(0xf0f0f0, 20, 100); \n    sceneRef.current = scene;\n    const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);\n    camera.position.set(0, 20, 30);\n    camera.lookAt(0, 0, 0);\n    const renderer = new THREE.WebGLRenderer({\n      antialias: false,\n      powerPreference: \"high-performance\"\n    }); // Disable antialias for perf\n    renderer.setPixelRatio(1); // Force 1x pixel ratio for low-spec\n    renderer.setSize(width, height);\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.BasicShadowMap; // Faster shadows\n    renderer.outputColorSpace = THREE.SRGBColorSpace; // Correct colors\n    mountRef.current.appendChild(renderer.domElement);\n    rendererRef.current = renderer;\n\n    // --- Controls ---\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.05;\n    // Limit controls to avoid going below ground\n    controls.maxPolarAngle = Math.PI / 2 - 0.1;\n    controlsRef.current = controls;\n\n    // --- Environment ---\n    // Optimization: Removed 4K texture loading. Using simple grid/color for low-spec compatibility.\n\n    const floorGeometry = new THREE.PlaneGeometry(100, 100);\n    const floorMaterial = new THREE.MeshStandardMaterial({\n      color: 0x808080,\n      roughness: 0.8,\n      metalness: 0.1\n    });\n    const floor = new THREE.Mesh(floorGeometry, floorMaterial);\n    floor.rotation.x = -Math.PI / 2;\n    floor.receiveShadow = true;\n    scene.add(floor);\n    const gridHelper = new THREE.GridHelper(100, 50, 0xcccccc, 0xeeeeee);\n    scene.add(gridHelper);\n\n    // --- Lighting ---\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7); // Increased Ambient\n    scene.add(ambientLight);\n    const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.6);\n    hemiLight.position.set(0, 20, 0);\n    scene.add(hemiLight);\n    const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);\n    dirLight.position.set(10, 30, 20); // Higher and angled\n    dirLight.castShadow = true;\n    // Optimization: Reduced shadow map size for performance\n    dirLight.shadow.mapSize.width = 512;\n    dirLight.shadow.mapSize.height = 512;\n    dirLight.shadow.bias = -0.001; // Reduce shadow artifacts\n    dirLight.shadow.camera.near = 0.5;\n    dirLight.shadow.camera.far = 100;\n    dirLight.shadow.camera.left = -50;\n    dirLight.shadow.camera.right = 50;\n    dirLight.shadow.camera.top = 50;\n    dirLight.shadow.camera.bottom = -50;\n    scene.add(dirLight);\n\n    // --- Animation Loop ---\n    const animate = () => {\n      requestAnimationFrame(animate);\n      controls.update();\n      renderer.render(scene, camera);\n    };\n    animate();\n    return () => {\n      if (mountRef.current && renderer.domElement) {\n        mountRef.current.removeChild(renderer.domElement);\n      }\n      renderer.dispose();\n      controls.dispose();\n    };\n  }, []);\n\n  // --- Update Layout ---\n  useEffect(() => {\n    if (!layoutData || !sceneRef.current) return;\n\n    // Clear previous generic meshes (keep lights/helpers/floor)\n    const scene = sceneRef.current;\n\n    // Remove old layout groups (detect by userData.entityId)\n    for (let i = scene.children.length - 1; i >= 0; i--) {\n      const child = scene.children[i];\n      // We only remove the objects that are part of our data structure\n      if (child.userData.entityId) {\n        // IMPORTANT: Dispose resources before removing from scene\n        // If the object has a dispose method (from our Pattern), usage it.\n        // Note: We need a way to link the Scene Object back to our JS Class if we want to call .dispose() on the class.\n        // However, our class `dispose` cleans up Three.js resources provided we have access to it.\n        // Since `child` here is a THREE.Group, we can traverse and clean standard things.\n\n        // Better approach: If we attached the class instance to userData, we could call it.\n        // But `PrototypePattern.js` attaches primitive data to userData.\n\n        // Fallback: Manual cleanup or if we had a reference to the previous layout object.\n        // Ideally, `ThreeDViewer` should track the `currentLayout` object to call dispose on it.\n\n        scene.remove(child);\n      }\n    }\n\n    // Add New Layout\n    const rootGroup = layoutData.group;\n    scene.add(rootGroup);\n    console.log(\"Adding layout to scene:\", layoutData);\n\n    // Update Camera View if defined\n    if (layoutData.cameraView && controlsRef.current && sceneRef.current) {\n      const {\n        position,\n        target\n      } = layoutData.cameraView;\n      // Get camera from controls\n      const camera = controlsRef.current.object;\n      if (position) camera.position.set(position.x, position.y, position.z);\n      if (target) controlsRef.current.target.set(target.x, target.y, target.z);\n      controlsRef.current.update();\n      console.log(\"Updated camera view based on layout settings.\");\n    }\n\n    // Cleanup function: Called when layoutData changes or component unmounts\n    return () => {\n      // Use the Pattern's dispose logic which protects shared assets\n      if (layoutData && typeof layoutData.dispose === 'function') {\n        console.log(\"Disposing resources for layout:\", layoutData.id);\n        layoutData.dispose();\n      }\n    };\n  }, [layoutData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mountRef,\n    style: {\n      width: '100%',\n      height: '600px',\n      border: '1px solid #ccc',\n      borderRadius: '8px',\n      overflow: 'hidden'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 12\n  }, this);\n};\n_s(ThreeDViewer, \"gNQSLE6j3y2KY/R6Eea4wBpewjI=\");\n_c = ThreeDViewer;\nexport default ThreeDViewer;\nvar _c;\n$RefreshReg$(_c, \"ThreeDViewer\");","map":{"version":3,"names":["React","useEffect","useRef","THREE","OrbitControls","jsxDEV","_jsxDEV","ThreeDViewer","layoutData","_s","mountRef","sceneRef","rendererRef","controlsRef","width","current","clientWidth","height","clientHeight","scene","Scene","background","Color","camera","PerspectiveCamera","position","set","lookAt","renderer","WebGLRenderer","antialias","powerPreference","setPixelRatio","setSize","shadowMap","enabled","type","BasicShadowMap","outputColorSpace","SRGBColorSpace","appendChild","domElement","controls","enableDamping","dampingFactor","maxPolarAngle","Math","PI","floorGeometry","PlaneGeometry","floorMaterial","MeshStandardMaterial","color","roughness","metalness","floor","Mesh","rotation","x","receiveShadow","add","gridHelper","GridHelper","ambientLight","AmbientLight","hemiLight","HemisphereLight","dirLight","DirectionalLight","castShadow","shadow","mapSize","bias","near","far","left","right","top","bottom","animate","requestAnimationFrame","update","render","removeChild","dispose","i","children","length","child","userData","entityId","remove","rootGroup","group","console","log","cameraView","target","object","y","z","id","ref","style","border","borderRadius","overflow","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/chenx/Documents/sda/prototype/client/src/ThreeDViewer.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\n\r\nconst ThreeDViewer = ({ layoutData }) => {\r\n    const mountRef = useRef(null);\r\n    const sceneRef = useRef(null);\r\n    const rendererRef = useRef(null);\r\n    const controlsRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // --- Init Scene ---\r\n        const width = mountRef.current.clientWidth;\r\n        const height = mountRef.current.clientHeight;\r\n\r\n        const scene = new THREE.Scene();\r\n        scene.background = new THREE.Color(0xf0f0f0); // Soft grey background\r\n        // scene.fog = new THREE.Fog(0xf0f0f0, 20, 100); \r\n        sceneRef.current = scene;\r\n\r\n        const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);\r\n        camera.position.set(0, 20, 30);\r\n        camera.lookAt(0, 0, 0);\r\n\r\n        const renderer = new THREE.WebGLRenderer({ antialias: false, powerPreference: \"high-performance\" }); // Disable antialias for perf\r\n        renderer.setPixelRatio(1); // Force 1x pixel ratio for low-spec\r\n        renderer.setSize(width, height);\r\n        renderer.shadowMap.enabled = true;\r\n        renderer.shadowMap.type = THREE.BasicShadowMap; // Faster shadows\r\n        renderer.outputColorSpace = THREE.SRGBColorSpace; // Correct colors\r\n        mountRef.current.appendChild(renderer.domElement);\r\n        rendererRef.current = renderer;\r\n\r\n        // --- Controls ---\r\n        const controls = new OrbitControls(camera, renderer.domElement);\r\n        controls.enableDamping = true;\r\n        controls.dampingFactor = 0.05;\r\n        // Limit controls to avoid going below ground\r\n        controls.maxPolarAngle = Math.PI / 2 - 0.1;\r\n        controlsRef.current = controls;\r\n\r\n        // --- Environment ---\r\n        // Optimization: Removed 4K texture loading. Using simple grid/color for low-spec compatibility.\r\n\r\n        const floorGeometry = new THREE.PlaneGeometry(100, 100);\r\n        const floorMaterial = new THREE.MeshStandardMaterial({\r\n            color: 0x808080,\r\n            roughness: 0.8,\r\n            metalness: 0.1\r\n        });\r\n\r\n        const floor = new THREE.Mesh(floorGeometry, floorMaterial);\r\n        floor.rotation.x = -Math.PI / 2;\r\n        floor.receiveShadow = true;\r\n        scene.add(floor);\r\n\r\n        const gridHelper = new THREE.GridHelper(100, 50, 0xcccccc, 0xeeeeee);\r\n        scene.add(gridHelper);\r\n\r\n        // --- Lighting ---\r\n        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7); // Increased Ambient\r\n        scene.add(ambientLight);\r\n\r\n        const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.6);\r\n        hemiLight.position.set(0, 20, 0);\r\n        scene.add(hemiLight);\r\n\r\n        const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);\r\n        dirLight.position.set(10, 30, 20); // Higher and angled\r\n        dirLight.castShadow = true;\r\n        // Optimization: Reduced shadow map size for performance\r\n        dirLight.shadow.mapSize.width = 512;\r\n        dirLight.shadow.mapSize.height = 512;\r\n        dirLight.shadow.bias = -0.001; // Reduce shadow artifacts\r\n        dirLight.shadow.camera.near = 0.5;\r\n        dirLight.shadow.camera.far = 100;\r\n        dirLight.shadow.camera.left = -50;\r\n        dirLight.shadow.camera.right = 50;\r\n        dirLight.shadow.camera.top = 50;\r\n        dirLight.shadow.camera.bottom = -50;\r\n        scene.add(dirLight);\r\n\r\n        // --- Animation Loop ---\r\n        const animate = () => {\r\n            requestAnimationFrame(animate);\r\n            controls.update();\r\n            renderer.render(scene, camera);\r\n        };\r\n        animate();\r\n\r\n        return () => {\r\n            if (mountRef.current && renderer.domElement) {\r\n                mountRef.current.removeChild(renderer.domElement);\r\n            }\r\n            renderer.dispose();\r\n            controls.dispose();\r\n        };\r\n    }, []);\r\n\r\n    // --- Update Layout ---\r\n    useEffect(() => {\r\n        if (!layoutData || !sceneRef.current) return;\r\n\r\n        // Clear previous generic meshes (keep lights/helpers/floor)\r\n        const scene = sceneRef.current;\r\n\r\n        // Remove old layout groups (detect by userData.entityId)\r\n        for (let i = scene.children.length - 1; i >= 0; i--) {\r\n            const child = scene.children[i];\r\n            // We only remove the objects that are part of our data structure\r\n            if (child.userData.entityId) {\r\n                // IMPORTANT: Dispose resources before removing from scene\r\n                // If the object has a dispose method (from our Pattern), usage it.\r\n                // Note: We need a way to link the Scene Object back to our JS Class if we want to call .dispose() on the class.\r\n                // However, our class `dispose` cleans up Three.js resources provided we have access to it.\r\n                // Since `child` here is a THREE.Group, we can traverse and clean standard things.\r\n\r\n                // Better approach: If we attached the class instance to userData, we could call it.\r\n                // But `PrototypePattern.js` attaches primitive data to userData.\r\n\r\n                // Fallback: Manual cleanup or if we had a reference to the previous layout object.\r\n                // Ideally, `ThreeDViewer` should track the `currentLayout` object to call dispose on it.\r\n\r\n                scene.remove(child);\r\n            }\r\n        }\r\n\r\n        // Add New Layout\r\n        const rootGroup = layoutData.group;\r\n        scene.add(rootGroup);\r\n\r\n        console.log(\"Adding layout to scene:\", layoutData);\r\n\r\n        // Update Camera View if defined\r\n        if (layoutData.cameraView && controlsRef.current && sceneRef.current) {\r\n            const { position, target } = layoutData.cameraView;\r\n            // Get camera from controls\r\n            const camera = controlsRef.current.object;\r\n\r\n            if (position) camera.position.set(position.x, position.y, position.z);\r\n            if (target) controlsRef.current.target.set(target.x, target.y, target.z);\r\n\r\n            controlsRef.current.update();\r\n            console.log(\"Updated camera view based on layout settings.\");\r\n        }\r\n\r\n        // Cleanup function: Called when layoutData changes or component unmounts\r\n        return () => {\r\n            // Use the Pattern's dispose logic which protects shared assets\r\n            if (layoutData && typeof layoutData.dispose === 'function') {\r\n                console.log(\"Disposing resources for layout:\", layoutData.id);\r\n                layoutData.dispose();\r\n            }\r\n        };\r\n\r\n    }, [layoutData]);\r\n\r\n    return <div ref={mountRef} style={{ width: '100%', height: '600px', border: '1px solid #ccc', borderRadius: '8px', overflow: 'hidden' }} />;\r\n};\r\n\r\nexport default ThreeDViewer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}